(("undefined"!==typeof self?self:this)["webpackJsonphpc_ui_1_1_1"]=("undefined"!==typeof self?self:this)["webpackJsonphpc_ui_1_1_1"]||[]).push([[0],{"3a6b":function(e,t,a){"use strict";a.r(t);var s=function(){var e,t,a,s,n,i=this,o=i._self._c;return o("ResourceTabs",{staticClass:"mt-20",attrs:{mode:"view",value:i.value}},[o("Tab",{attrs:{name:"Summary",weight:8}},[o("LabeledInput",{attrs:{label:"JobID",disabled:!0},model:{value:i.vcjob.metadata.uid,callback:function(e){i.$set(i.vcjob.metadata,"uid",e)},expression:"vcjob.metadata.uid"}}),o("LabeledInput",{attrs:{label:"JobName",disabled:!0},model:{value:i.vcjob.metadata.name,callback:function(e){i.$set(i.vcjob.metadata,"name",e)},expression:"vcjob.metadata.name"}}),null!==(e=i.vcjob.spec.tasks[0].template.spec.containers[0])&&void 0!==e&&null!==(e=e.securityContext)&&void 0!==e&&e.runAsUser?o("LabeledInput",{attrs:{label:"Owner uid",mode:"view"},model:{value:i.vcjob.spec.tasks[0].template.spec.containers[0].securityContext.runAsUser,callback:function(e){i.$set(i.vcjob.spec.tasks[0].template.spec.containers[0].securityContext,"runAsUser",e)},expression:"vcjob.spec.tasks[0].template.spec.containers[0].securityContext.runAsUser"}}):i._e(),o("LabeledInput",{attrs:{label:"Status",mode:"view"},model:{value:i.vcjob.status.state,callback:function(e){i.$set(i.vcjob.status,"state",e)},expression:"vcjob.status.state"}}),o("SimpleBox",{attrs:{title:"TotalNodes"}},[o("div",[i._v(" count of node list ")])]),o("SimpleBox",{attrs:{title:"NodeList"}},[o("div",[i._v("Pod List -> .spec.nodeName")])]),o("SimpleBox",{attrs:{title:"TotalCPUs"}},[o("div",[i._v("n pods * "+i._s((null===(t=i.vcjob.spec.tasks)||void 0===t||null===(t=t[0].template.spec.containers)||void 0===t||null===(t=t[0].resources)||void 0===t||null===(t=t.requests)||void 0===t?void 0:t.cpu)||""))])]),o("SimpleBox",{attrs:{title:"Memory"}},[o("div",[i._v(i._s((null===(a=i.vcjob.spec.tasks)||void 0===a||null===(a=a[0].template.spec.containers)||void 0===a||null===(a=a[0].resources)||void 0===a||null===(a=a.requests)||void 0===a?void 0:a.memory)||""))])]),o("SimpleBox",{attrs:{title:"CPU"}},[o("div",[i._v(i._s((null===(s=i.vcjob.spec.tasks)||void 0===s||null===(s=s[0].template.spec.containers)||void 0===s||null===(s=s[0].resources)||void 0===s||null===(s=s.requests)||void 0===s?void 0:s.cpu)||""))])]),o("SimpleBox",{attrs:{title:"Appname"}},[o("div",[i._v('.metadata.labels[] | { ."helm.sh/chart" }')])]),o("SimpleBox",{attrs:{title:"Command"}},[o("div",[i._v(i._s((null===(n=i.vcjob.spec.tasks)||void 0===n||null===(n=n[0].template.spec.containers)||void 0===n?void 0:n[0].command)||""))])]),o("SimpleBox",{attrs:{title:"etc"}},[o("div",[i._v("Hello")])])],1),o("Tab",{attrs:{name:"Parameters",weight:7}},[o("SimpleBox",{attrs:{title:"Plugins"}},[i._v(" vcjob.spec.plugins "),i._l(i.vcjob.spec.plugins,(function(e,t,a){return e.length>0?o("SimpleBox",{key:a,attrs:{title:t}},[o("TextAreaAutoGrow",{attrs:{disabled:i.disabled,mode:"view","min-height":40,spellcheck:!1},model:{value:i.vcjob.spec.plugins[t],callback:function(e){i.$set(i.vcjob.spec.plugins,t,e)},expression:"vcjob.spec.plugins[key]"}})],1):i._e()}))],2),o("SimpleBox",{attrs:{title:"ENV"}},[i._v(" vcjob.spec.tasks.name "),i._l(i.vcjob.spec.tasks,(function(e,t){return o("SimpleBox",{key:t,attrs:{title:e.name}},[i._v(" task.template.spec.containers.name "),i._l(e.template.spec.containers,(function(e,t){return o("SimpleBox",{key:t,attrs:{title:e.name}},[i._v(" container.env "),i._l(e.env,(function(e,t){return o("LabeledInput",{key:t,attrs:{label:e.name},model:{value:e.value,callback:function(t){i.$set(e,"value",t)},expression:"env.value"}})}))],2)}))],2)}))],2),o("LabeledInput",{attrs:{label:"containers",mode:"view"},model:{value:i.vcjob.containersCount,callback:function(e){i.$set(i.vcjob,"containersCount",e)},expression:"vcjob.containersCount"}}),o("SimpleBox",{attrs:{title:"etc"}},[o("div",[i._v("Hello")])])],1),o("Tab",{attrs:{label:"Logs",name:"Logs",weight:7}},[o("ul",[o("li",[i._v("Job Logs")]),o("li",[i._v("Console output")])])]),o("Tab",{attrs:{label:"Files",name:"Files",weight:7}},[o("SimpleBox",{attrs:{title:"Folder"}},[i._v(" vcjob.spec.tasks "),i._l(i.vcjob.volumeMounts.spec.tasks,(function(e,t){return o("SimpleBox",{key:t,attrs:{title:e.name}},[i._v(" "+i._s(e)+" task.template.spec.containers "),i._l(e.template.spec.containers,(function(e,t){return o("SimpleBox",{key:t,attrs:{title:e.name}},i._l(e.volumeMounts,(function(e,t){return o("SimpleBox",{key:t,attrs:{title:e.name}},[e.hostPath?o("div",[i._v(" mountPath: "+i._s(e.mountPath)+" hostPath: "+i._s(e.hostPath.path)+" ")]):e.nfs?o("div",[i._v(" mountPath: "+i._s(e.mountPath)+" NFS: "+i._s(e.nfs.server)+":"+i._s(e.nfs.path)+" ")]):i._e()])})),1)}))],2)}))],2),o("SimpleBox",{attrs:{title:"Command"}},[o("button",{on:{click:function(e){return i.callApiBtn(i.item)}}},[i._v(" Open FileExplorer ")])]),o("ul",[o("li",[i._v("Open FileExplorer ?")]),o("li",[i._v("Job Files (input files, output files)")])])],1),o("Tab",{attrs:{label:i.t("workload.container.titles.containers"),name:"containers",weight:3}},[o("SortableTable",{attrs:{rows:i.containers,headers:i.containerHeaders,mode:i.mode,"key-field":"name",search:!1,"row-actions":!0,"table-actions":!1}})],1),i.v1MonitoringUrl?o("Tab",{attrs:{name:"v1Metrics",label:i.t("node.detail.tab.metrics"),weight:0}},[o("LabeledSelect",{staticClass:"pod-metrics-chooser",attrs:{value:i.selection,"label-key":"workload.metrics.metricsView",options:i.metricsOptions},on:{input:function(e){return i.selectionChanged(e)}}}),o("div",{attrs:{id:"ember-anchor"}},[o("EmberPage",{attrs:{inline:"ember-anchor",src:i.v1Metrics}})],1)],1):i._e(),i.showMetrics?o("Tab",{attrs:{label:i.t("workload.container.titles.metrics"),name:"pod-metrics",weight:2.5},scopedSlots:i._u([{key:"default",fn:function(e){return[e.active?o("DashboardMetrics",{attrs:{"detail-url":i.POD_METRICS_DETAIL_URL,"summary-url":i.POD_METRICS_SUMMARY_URL,vars:i.graphVars,"graph-height":"550px"}}):i._e()]}}],null,!1,2019757713)}):i._e(),i.showProjectMetrics?o("Tab",{attrs:{label:i.t("workload.container.titles.metrics"),name:"pod-metrics",weight:2.5},scopedSlots:i._u([{key:"default",fn:function(e){return[e.active?o("DashboardMetrics",{attrs:{"detail-url":i.POD_PROJECT_METRICS_DETAIL_URL,"summary-url":i.POD_PROJECT_METRICS_SUMMARY_URL,vars:i.graphVars,"graph-height":"550px"}}):i._e()]}}],null,!1,580576593)}):i._e()],1)},n=[],i=a("305c"),o=a("38de"),r=a("c422"),l=a("0fb1"),c=a("f1ea"),u=a("8e93"),d=a("8275"),m=a("462f"),p=a("1d19"),v=a("bddd"),h=a("c389"),b=a("c1f8"),_=a("9ce4"),f=a("b45b"),g=a("466b"),S=a("050d"),x=a.n(S),T=a("5000"),k=a("2cb5"),C=a("907c"),j=a("4ac6");const I="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-pod-containers-1/rancher-pod-containers?orgId=1",O="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-pod-1/rancher-pod?orgId=1";var w={name:"VolcanoJobDetail",components:{DashboardMetrics:h["a"],ResourceTabs:r["a"],Tab:o["a"],SortableTable:l["b"],SimpleBox:c["a"],LabeledInput:u["a"],TextAreaAutoGrow:d["a"],LabeledSelect:g["a"]},mixins:[i["a"],b["a"]],async fetch(){if(this.showMetrics=await Object(f["a"])(this.$store,this.currentCluster.id,[I,O]),!this.showMetrics){var e;const t=await this.$store.dispatch("cluster/find",{type:C["q"],id:this.value.metadata.namespace}),a=null===t||void 0===t||null===(e=t.metadata)||void 0===e?void 0:e.labels[j["i"]];a&&(this.POD_PROJECT_METRICS_DETAIL_URL=`/api/v1/namespaces/cattle-project-${a}-monitoring/services/http:cattle-project-${a}-monitoring-grafana:80/proxy/d/rancher-pod-containers-1/rancher-pod-containers?orgId=1'`,this.POD_PROJECT_METRICS_SUMMARY_URL=`/api/v1/namespaces/cattle-project-${a}-monitoring/services/http:cattle-project-${a}-monitoring-grafana:80/proxy/d/rancher-pod-1/rancher-pod?orgId=1`,this.showProjectMetrics=await Object(f["a"])(this.$store,this.currentCluster.id,[this.POD_PROJECT_METRICS_DETAIL_URL,this.POD_PROJECT_METRICS_SUMMARY_URL],"cluster",a))}},data(){const e=this.$store.getters["i18n/t"],t={id:"//POD//",label:e("workload.metrics.pod")},a=this.value;return{vcjob:a,POD_METRICS_DETAIL_URL:I,POD_METRICS_SUMMARY_URL:O,POD_PROJECT_METRICS_DETAIL_URL:"",POD_PROJECT_METRICS_SUMMARY_URL:"",POD_OPTION:t,showMetrics:!1,showProjectMetrics:!1,selection:t,metricsID:null}},computed:{...Object(_["a"])(["currentCluster"]),containers(){const e=this.allContainers,t=this.allStatuses;return(e||[]).map(e=>{var a;const s=Object(v["e"])(t,"name",e.name),n=(null===s||void 0===s?void 0:s.state)||{},i=[],o=Object.values(n)[0]||{},r=o.reason||"",l=o.message||"",c=o.reason&&o.message,u=`${r}${c?" (":""}${l}${c?")":""}`;if(u&&i.push(u),null!==s&&void 0!==s&&null!==(a=s.lastState)&&void 0!==a&&a.terminated){var d;const e=null===s||void 0===s||null===(d=s.lastState)||void 0===d?void 0:d.terminated,t=e.reason||"",a=e.message||"",n=e.exitCode||"",o=this.dateTimeFormat(e.startedAt),r=this.dateTimeFormat(e.finishedAt),l=e.reason&&e.message,c=`${t}${l?" (":""}${a}${l?")":""}`;i.push(this.t("workload.container.terminationState",{lsDescription:c,lsExitCode:n,lsStartedAt:o,lsFinishedAt:r}))}return{...e,status:s||{},stateDisplay:s?this.value.containerStateDisplay(s):void 0,stateBackground:s?this.value.containerStateColor(s).replace("text","bg"):void 0,nameSort:Object(p["b"])(e.name).toLowerCase(),readyIcon:null!==s&&void 0!==s&&s.ready?"icon-checkmark text-success ml-5":"icon-x text-error ml-5",availableActions:this.value.containerActions,stateObj:s,stateDescription:i.join(" | "),initIcon:this.value.containerIsInit(e)?"icon-checkmark icon-2x text-success ml-5":"icon-minus icon-2x text-muted ml-5",openShell:()=>this.value.openShell(e.name),openLogs:()=>this.value.openLogs(e.name)}})},allContainers(){const{containers:e=[],initContainers:t=[]}=this.value.spec;return[...e,...t]},allStatuses(){const{containerStatuses:e=[],initContainerStatuses:t=[]}=this.value.status;return[...e,...t]},containerHeaders(){return[m["J"],{name:"ready",labelKey:"tableHeaders.ready",formatter:"IconText",formatterOpts:{iconKey:"readyIcon"},align:"left",width:75,sort:"readyIcon"},{...m["H"],value:"name"},m["k"],{name:"isInit",labelKey:"workload.container.init",formatter:"IconText",formatterOpts:{iconKey:"initIcon"},align:"left",width:75,sort:"initIcon"},{name:"restarts",labelKey:"tableHeaders.restarts",value:"status.restartCount",align:"right",width:75},{name:"age",labelKey:"tableHeaders.started",value:"status.state.running.startedAt",sort:"status.state.running.startedAt:desc",search:!1,formatter:"LiveDate",formatterOpts:{addSuffix:!0},align:"right"}]},graphVars(){return{namespace:this.value.namespace,pod:this.value.name}},metricsOptions(){const e=this.containers.map(e=>({id:e.name,label:e.name}));return e.unshift(this.POD_OPTION),e},v1Metrics(){return this.metricsID?`${this.v1MonitoringContainerBaseUrl}/${this.metricsID}`:this.v1MonitoringUrl},dateTimeFormatString(){const e=Object(k["f"])(this.$store.getters["prefs/get"](T["b"])),t=Object(k["f"])(this.$store.getters["prefs/get"](T["l"]));return`${e} ${t}`}},methods:{selectionChanged(e){const t=e===this.POD_OPTION?null:e.id;this.metricsID=t,this.selection=e},dateTimeFormat(e){return e?x()(e).format(this.dateTimeFormatString):""}}},y=w,M=(a("3f74"),a("d802")),P=Object(M["a"])(y,s,n,!1,null,"7ed92ef5",null);t["default"]=P.exports},"3f74":function(e,t,a){"use strict";a("5a3b")},"5a3b":function(e,t,a){var s=a("a7c8");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var n=a("0ed3").default;n("3729f79e",s,!0,{sourceMap:!1,shadowMode:!1})},a7c8:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".pod-metrics-chooser[data-v-7ed92ef5]{width:-moz-fit-content;width:fit-content;margin-bottom:10px;min-width:300px}",""]),e.exports=t}}]);
//# sourceMappingURL=hpc-ui-1.1.1.umd.min.detail.js.map
(("undefined"!==typeof self?self:this)["webpackJsonphpc_ui_1_1_5"]=("undefined"!==typeof self?self:this)["webpackJsonphpc_ui_1_1_5"]||[]).push([[0],{"1d82":function(t,e,a){var s=a("d48c");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("0ed3").default;i("3738af4c",s,!0,{sourceMap:!1,shadowMode:!1})},"3a6b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("ResourceTabs",{staticClass:"mt-20",attrs:{mode:"view",value:t.value}},[e("Tab",{staticClass:"bordered-table",attrs:{name:"info",label:t.t("node.detail.tab.info.label"),weight:9}},[e("ResourceTable",{attrs:{"v-if":t.vcjob.info,"key-field":"_key",sortkey:"_abe",headers:t.infoTableHeaders,rows:t.vcjob.info,"row-actions":!1,"table-actions":!1,"show-headers":!1,search:!1},scopedSlots:t._u([{key:"cell:value",fn:function({row:a}){return["Command"==a.key?e("div",[e("TextAreaAutoGrow",{attrs:{mode:"view","min-height":40,spellcheck:!1},model:{value:a.value,callback:function(e){t.$set(a,"value",e)},expression:"row.value"}})],1):e("div",[t._v(" "+t._s(a.value)+" ")])]}}])})],1),e("Tab",{attrs:{label:"Files",name:"Files",weight:7}},[e("SimpleBox",{attrs:{title:"Folder"}},[t._v(" vcjob.spec.tasks "),t._l(t.vcjob.volumeMounts.spec.tasks,(function(a,s){return e("SimpleBox",{key:s,attrs:{title:a.name}},[t._v(" "+t._s(a)+" task.template.spec.containers "),t._l(a.template.spec.containers,(function(a,s){return e("SimpleBox",{key:s,attrs:{title:a.name}},t._l(a.volumeMounts,(function(a,s){return e("SimpleBox",{key:s,attrs:{title:a.name}},[a.hostPath?e("div",[t._v(" mountPath: "+t._s(a.mountPath)+" hostPath: "+t._s(a.hostPath.path)+" ")]):a.nfs?e("div",[t._v(" mountPath: "+t._s(a.mountPath)+" NFS: "+t._s(a.nfs.server)+":"+t._s(a.nfs.path)+" ")]):t._e()])})),1)}))],2)}))],2),e("SimpleBox",{attrs:{title:"Command"}},[e("button",{on:{click:function(e){return t.callApiBtn(t.item)}}},[t._v(" Open FileExplorer ")])]),e("ul",[e("li",[t._v("Open FileExplorer ?")]),e("li",[t._v("Job Files (input files, output files)")])])],1),t.v1MonitoringUrl?e("Tab",{attrs:{name:"v1Metrics",label:t.t("node.detail.tab.metrics"),weight:0}},[e("LabeledSelect",{staticClass:"pod-metrics-chooser",attrs:{value:t.selection,"label-key":"workload.metrics.metricsView",options:t.metricsOptions},on:{input:function(e){return t.selectionChanged(e)}}}),e("div",{attrs:{id:"ember-anchor"}},[e("EmberPage",{attrs:{inline:"ember-anchor",src:t.v1Metrics}})],1)],1):t._e()],1)},i=[],r=a("126f"),n=a("305c"),o=a("38de"),l=a("c422"),c=a("0fb1"),d=a("f1ea"),u=a("8e93"),h=a("8275"),m=a("462f"),p=a("1d19"),v=a("bddd"),b=a("c389"),f=a("c1f8"),_=a("9ce4"),g=a("b45b"),O=a("466b"),T=a("050d"),S=a.n(T),w=a("5000"),y=a("2cb5"),I=a("907c"),x=a("4ac6");const C="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-pod-containers-1/rancher-pod-containers?orgId=1",M="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-pod-1/rancher-pod?orgId=1";var P={name:"VolcanoJobDetail",components:{ResourceTable:r["a"],DashboardMetrics:b["a"],ResourceTabs:l["a"],Tab:o["a"],SortableTable:c["b"],SimpleBox:d["a"],LabeledInput:u["a"],TextAreaAutoGrow:h["a"],LabeledSelect:O["a"]},mixins:[n["a"],f["a"]],async fetch(){if(console.log(this),console.log(this.$store),this.showMetrics=await Object(g["a"])(this.$store,this.currentCluster.id,[C,M]),!this.showMetrics){var t;const e=await this.$store.dispatch("cluster/find",{type:I["r"],id:this.value.metadata.namespace}),a=null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.labels[x["j"]];a&&(this.POD_PROJECT_METRICS_DETAIL_URL=`/api/v1/namespaces/cattle-project-${a}-monitoring/services/http:cattle-project-${a}-monitoring-grafana:80/proxy/d/rancher-pod-containers-1/rancher-pod-containers?orgId=1'`,this.POD_PROJECT_METRICS_SUMMARY_URL=`/api/v1/namespaces/cattle-project-${a}-monitoring/services/http:cattle-project-${a}-monitoring-grafana:80/proxy/d/rancher-pod-1/rancher-pod?orgId=1`,this.showProjectMetrics=await Object(g["a"])(this.$store,this.currentCluster.id,[this.POD_PROJECT_METRICS_DETAIL_URL,this.POD_PROJECT_METRICS_SUMMARY_URL],"cluster",a))}const e=this.$store.getters["currentProduct"].inStore;this.$store.getters[e+"/schemaFor"]("Pod")&&await this.$store.dispatch(e+"/findAll",{type:"pod"})},data(){const t=this.$store.getters["i18n/t"],e={id:"//POD//",label:t("workload.metrics.pod")},a=this.value;return{vcjob:a,POD_METRICS_DETAIL_URL:C,POD_METRICS_SUMMARY_URL:M,POD_PROJECT_METRICS_DETAIL_URL:"",POD_PROJECT_METRICS_SUMMARY_URL:"",POD_OPTION:e,showMetrics:!1,showProjectMetrics:!1,selection:e,metricsID:null,infoTableHeaders:[{...m["r"],label:"",width:200},{...m["X"],label:"",dashIfEmpty:!0}]}},computed:{...Object(_["a"])(["currentCluster"]),containers(){const t=this.allContainers,e=this.allStatuses;return(t||[]).map(t=>{var a;const s=Object(v["f"])(e,"name",t.name),i=(null===s||void 0===s?void 0:s.state)||{},r=[],n=Object.values(i)[0]||{},o=n.reason||"",l=n.message||"",c=n.reason&&n.message,d=`${o}${c?" (":""}${l}${c?")":""}`;if(d&&r.push(d),null!==s&&void 0!==s&&null!==(a=s.lastState)&&void 0!==a&&a.terminated){var u;const t=null===s||void 0===s||null===(u=s.lastState)||void 0===u?void 0:u.terminated,e=t.reason||"",a=t.message||"",i=t.exitCode||"",n=this.dateTimeFormat(t.startedAt),o=this.dateTimeFormat(t.finishedAt),l=t.reason&&t.message,c=`${e}${l?" (":""}${a}${l?")":""}`;r.push(this.t("workload.container.terminationState",{lsDescription:c,lsExitCode:i,lsStartedAt:n,lsFinishedAt:o}))}return{...t,status:s||{},stateDisplay:s?this.value.containerStateDisplay(s):void 0,stateBackground:s?this.value.containerStateColor(s).replace("text","bg"):void 0,nameSort:Object(p["b"])(t.name).toLowerCase(),readyIcon:null!==s&&void 0!==s&&s.ready?"icon-checkmark text-success ml-5":"icon-x text-error ml-5",availableActions:this.value.containerActions,stateObj:s,stateDescription:r.join(" | "),initIcon:this.value.containerIsInit(t)?"icon-checkmark icon-2x text-success ml-5":"icon-minus icon-2x text-muted ml-5",openShell:()=>this.value.openShell(t.name),openLogs:()=>this.value.openLogs(t.name)}})},allContainers(){const{containers:t=[],initContainers:e=[]}=this.value.spec;return[...t,...e]},allStatuses(){const{containerStatuses:t=[],initContainerStatuses:e=[]}=this.value.status;return[...t,...e]},containerHeaders(){return[m["N"],{name:"ready",labelKey:"tableHeaders.ready",formatter:"IconText",formatterOpts:{iconKey:"readyIcon"},align:"left",width:75,sort:"readyIcon"},{...m["L"],value:"name"},m["n"],{name:"isInit",labelKey:"workload.container.init",formatter:"IconText",formatterOpts:{iconKey:"initIcon"},align:"left",width:75,sort:"initIcon"},{name:"restarts",labelKey:"tableHeaders.restarts",value:"status.restartCount",align:"right",width:75},{name:"age",labelKey:"tableHeaders.started",value:"status.state.running.startedAt",sort:"status.state.running.startedAt:desc",search:!1,formatter:"LiveDate",formatterOpts:{addSuffix:!0},align:"right"}]},graphVars(){return{namespace:this.value.namespace,pod:this.value.name}},metricsOptions(){const t=this.containers.map(t=>({id:t.name,label:t.name}));return t.unshift(this.POD_OPTION),t},v1Metrics(){return this.metricsID?`${this.v1MonitoringContainerBaseUrl}/${this.metricsID}`:this.v1MonitoringUrl},dateTimeFormatString(){const t=Object(y["f"])(this.$store.getters["prefs/get"](w["b"])),e=Object(y["f"])(this.$store.getters["prefs/get"](w["o"]));return`${t} ${e}`}},methods:{selectionChanged(t){const e=t===this.POD_OPTION?null:t.id;this.metricsID=e,this.selection=t},dateTimeFormat(t){return t?S()(t).format(this.dateTimeFormatString):""}}},R=P,D=(a("671b"),a("d802")),$=Object(D["a"])(R,s,i,!1,null,"f72fb83a",null);e["default"]=$.exports},"671b":function(t,e,a){"use strict";a("1d82")},d48c:function(t,e,a){var s=a("5eaa");e=s(!1),e.push([t.i,".pod-metrics-chooser[data-v-f72fb83a]{width:-moz-fit-content;width:fit-content;margin-bottom:10px;min-width:300px}",""]),t.exports=e}}]);
//# sourceMappingURL=hpc-ui-1.1.5.umd.min.detail.js.map